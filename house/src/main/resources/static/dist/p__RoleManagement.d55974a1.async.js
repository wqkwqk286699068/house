(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[104],{A3pG:function(e,a,t){"use strict";t.r(a);t("T2oS");var r,n,l,o=t("W9HT"),i=(t("IzEo"),t("bx4M")),s=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),c=(t("5NDa"),t("5rEg")),m=(t("+L6B"),t("2/Rp")),u=(t("2qtc"),t("kLXV")),p=(t("P2fV"),t("NJEC")),f=(t("/zsF"),t("PArb")),h=(t("Awhp"),t("KrTs")),g=t("2Taf"),y=t.n(g),k=t("vZ4D"),v=t.n(k),b=t("rlhR"),E=t.n(b),R=t("MhPg"),M=t.n(R),S=t("l4Ni"),I=t.n(S),C=t("ujKo"),O=t.n(C),j=(t("y8nQ"),t("Vl3Y")),V=t("q1tI"),N=t.n(V),w=t("MuoO"),D=t("zHco"),F=t("LLXN"),x=t("CkN6"),B=(t("nRaC"),t("5RzL"));function T(e){var a=A();return function(){var t,r=O()(e);if(a){var n=O()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return I()(this,t)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var z,q,P,K,L=B["a"].TreeNode,H=(r=Object(w["connect"])(function(e){var a=e.rolemodel,t=e.loading;return{rolemodel:a,loading:t.effects["rolemodel/AllList"]}}),r((l=function(e){M()(t,e);var a=T(t);function t(){var e;y()(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=a.call.apply(a,[this].concat(n)),e.state={},e.selectDepItem=function(a){e.props.onChange(a),"function"===typeof e.props.onSelect&&e.props.onSelect(a)},e}return v()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"rolemodel/AllList"})}},{key:"conversionObject",value:function(){var e=this.props.value;return e||[]}},{key:"render",value:function(){var e=this.conversionObject();e.push(3),e.push(6),e.push(26),e.push(254);var a=this.props.rolemodel.DataSource,t=function e(a){return a.map(function(a){return a.children?N.a.createElement(L,{title:a.name,value:a.rId,key:a.rId,disableCheckbox:3===a.rId||(6===a.rId||(26===a.rId||254===a.rId)),defaultSelectedKeys:["3","6","26","254"],defaultCheckedKeys:["3","6","26","254"]},e(a.children)):N.a.createElement(L,{title:a.name,defaultSelectedKeys:["3","6","26","254"],defaultCheckedKeys:["3","6","26","254"],disableCheckbox:3===a.rId||(6===a.rId||(26===a.rId||254===a.rId)),value:a.rId,key:a.rId})})};return N.a.createElement(B["a"],{value:e,placeholder:Object(F["formatMessage"])({id:"info.all"}),dropdownStyle:{maxHeight:300,overflow:"auto"},onChange:this.selectDepItem,treeCheckable:!0,maxTagCount:1},t(a))}}]),t}(V["PureComponent"]),n=l))||n),J=H,W=t("HZnN");function X(e){var a=Z();return function(){var t,r=O()(e);if(a){var n=O()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return I()(this,t)}}function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var G=j["a"].Item,Q=["error","processing"],Y=["\u7981\u7528","\u6b63\u5e38"],U="",$=(z=Object(w["connect"])(function(e){var a=e.rolemodel,t=e.loading;return{rolemodel:a,loadingAll:t.models.rolemodel}}),q=j["a"].create(),z(P=q((K=function(e){M()(t,e);var a=X(t);function t(e){var r;return y()(this,t),r=a.call(this,e),r.columns=[{title:Object(F["formatMessage"])({id:"role.rolename"}),dataIndex:"name",key:"name",width:"8%"},{title:Object(F["formatMessage"])({id:"role.roledescription"}),dataIndex:"remark",key:"remark",width:"20%"},{title:Object(F["formatMessage"])({id:"role.state"}),dataIndex:"iflag",key:"iflag",width:"5%",render:function(e){var a="1"===e?1:0;return N.a.createElement(h["a"],{status:Q[a],text:Y[a]})}},{title:Object(F["formatMessage"])({id:"role.action"}),dataIndex:"id",width:"10%",align:"center",render:function(e,a){return N.a.createElement(V["Fragment"],null,N.a.createElement(W["a"],{authority:"RoleManagement:update"},N.a.createElement("a",{onClick:r.updateModal.bind(E()(r),a)},Object(F["formatMessage"])({id:"role.update"}))),N.a.createElement(f["a"],{type:"vertical"}),N.a.createElement(W["a"],{authority:"RoleManagement:operation"},N.a.createElement(p["a"],{title:"1"===a.iflag?Object(F["formatMessage"])({id:"role.stoptonostop"}):Object(F["formatMessage"])({id:"role.nostoptostop"}),onConfirm:function(){return r.delete(a)}},N.a.createElement("a",null,"1"===a.iflag?Object(F["formatMessage"])({id:"role.stop"}):Object(F["formatMessage"])({id:"role.nostop"})))))}}],r.handleStandardTableChange=function(e){var a=r.props,t=a.dispatch,n=a.form;n.validateFields(function(a,n){r.setState({fenye:e});var l={"page.current":e.current,"page.size":e.pageSize,name:n.Name1,remark:n.Remark1,total:e.total};t({type:"rolemodel/selectAllRoleManagement",payload:l})})},r.handleSearch=function(e){var a=r.props,t=a.dispatch,n=a.form,l=r.state.fenye;n.validateFields(function(e,a){t({type:"rolemodel/selectAllRoleManagement",payload:{name:a.Name1,remark:a.Remark1}}),r.props.form.setFieldsValue({Name:a.Name,Remark:a.Remark}),r.handleStandardTableChange(l)})},r.showModal=function(e){r.setState({nameValidate:!1,remarkValidate:!1,name:"",remark:"",rIds:""});var a=r.props.form,t=a.resetFields;t(),r.setState({visible:!0,updateDisplayName:"none",addDisplayName:"block",biaoqian:"".concat(Object(F["formatMessage"])({id:"role.addrole"})),rIds:["3","6","26","254"]})},r.updateModal=function(e){var a=r.props,t=a.dispatch,n=a.form;r.setState({nameValidate:!1,remarkValidate:!1,name:"",remark:""});var l=n.resetFields;l(),t({type:"rolemodel/selectById",payload:{id:e.id}}).then(function(a){var t=r.props.rolemodel.Datas,n=[];if(void 0!==t.children&&t.children.length>0){for(var l=0;l<t.children.length;l++)n.push(t.children[l].id);r.setState({visible:!0,addDisplayName:"none",updateDisplayName:"block",biaoqian:"".concat(Object(F["formatMessage"])({id:"role.updaterole"})),name:e.name,remark:e.remark,rIds:n,id:e.id})}})},r.delete=function(e){var a=r.props.dispatch,t=r.state.fenye;U="1"===e.iflag?"0":"1",a({type:"rolemodel/deleteByRoleId",payload:{id:e.id,iflag:U}}),r.handleStandardTableChange(t)},r.addRole=function(e){var a=r.props,t=a.dispatch,n=a.form,l=r.state,o=l.fenye,i=l.rIds,s=l.nameValidate,d=l.remarkValidate;n.validateFields(function(e,a){if(a.name&&a.remark||(r.onBlurName(),r.onBlurRemark()),!a.name||!a.remark)return r.onBlurName(),void r.onBlurRemark();s||d||t({type:"rolemodel/addRole",payload:{name:a.name,remark:a.remark,rIds:i}}).then(function(e){var a=r.props.rolemodel.msg;0===a.code?u["a"].success({title:a.msg,onOk:function(){}}):u["a"].info({title:a.msg}),r.handleCancel(),r.props.form.setFieldsValue({name:"",remark:"",id:"",rIds:""}),r.setState({name:"",remark:"",id:"",rIds:""}),r.handleStandardTableChange(o)})})},r.state={selectedRows:[],fenye:[],load:!1,visible:!1,updateDisplayName:"none",addDisplayName:"none",biaoqian:"",nameValidate:!1,rIds:"",name:"",remark:"",id:"",data:[]},r}return v()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"rolemodel/selectAllRoleManagement"})}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.datalist})}},{key:"onBlurName",value:function(){var e=this,a=this.props.form;a.validateFields(["name"],{},function(a,t){if(t){if(void 0!==t.name)return t.name?void e.setState({nameValidate:!1}):void e.setState({nameValidate:!0});e.setState({nameValidate:!0})}})}},{key:"onBlurRemark",value:function(){var e=this,a=this.props.form;a.validateFields(["remark"],{},function(a,t){if(t){if(void 0!==t.remark)return t.remark?void e.setState({remarkValidate:!1}):void e.setState({remarkValidate:!0});e.setState({remarkValidate:!0})}})}},{key:"handleOk",value:function(){var e=this;this.setState({load:!0}),setTimeout(function(){e.setState({load:!1,visible:!1})},3e3)}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"updateRole",value:function(){var e=this,a=this.props,t=a.dispatch,r=a.form,n=this.state,l=n.fenye,o=n.rIds,i=n.nameValidate,s=n.remarkValidate,d=n.id;r.validateFields(function(a,r){if(r.name&&r.remark||(e.onBlurName(),e.onBlurRemark()),!r.name||!r.remark)return e.onBlurName(),void e.onBlurRemark();i||s||t({type:"rolemodel/updateById",payload:{name:r.name,remark:r.remark,rIds:o,id:d}}).then(function(a){var t=e.props.rolemodel.msg;0===t.code?u["a"].success({title:t.msg,onOk:function(){}}):u["a"].info({title:t.msg}),e.handleCancel(),e.props.form.setFieldsValue({name:"",remark:"",id:"",rIds:""}),e.setState({name:"",remark:"",id:"",rIds:""}),e.handleStandardTableChange(l)})})}},{key:"addRIds",value:function(e){this.setState({rIds:e})}},{key:"modal",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,r=a.loadingAll,n=this.state,l=n.biaoqian,o=n.visible,i=n.nameValidate,p=n.remarkValidate,f=n.name,h=n.remark,g=n.rIds;return N.a.createElement(u["a"],{ref:"modal",title:l,visible:o,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),style:{minWidth:1e3,minHeight:500,top:20},footer:[N.a.createElement(m["a"],{key:"back",size:"large",onClick:this.handleCancel.bind(this),style:{color:"black"}},Object(F["formatMessage"])({id:"userlist.cannel"})),N.a.createElement(m["a"],{key:"add",type:"primary",htmlType:"submit",size:"large",loading:r,style:{display:this.state.addDisplayName,float:"right",backgroundColor:"#3D73FE"},onClick:this.addRole.bind(this)},Object(F["formatMessage"])({id:"userlist.true"})),N.a.createElement(m["a"],{key:"update",type:"primary",htmlType:"submit",size:"large",loading:r,style:{display:this.state.updateDisplayName,float:"right",backgroundColor:"#3D73FE"},onClick:this.updateRole.bind(this)},Object(F["formatMessage"])({id:"userlist.true"}))]},N.a.createElement("footer",null,N.a.createElement(j["a"],null,N.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement(G,{label:N.a.createElement(F["FormattedMessage"],{id:"role.rolename"}),validateStatus:i?"error":"",help:i?"".concat(Object(F["formatMessage"])({id:"role.notname"})):""},t("name",{initialValue:f,rules:[{required:!0}]})(N.a.createElement(c["a"],{placeholder:Object(F["formatMessage"])({id:"role.inputname"}),style:{width:150},onBlur:function(){e.onBlurName()},onFocus:function(){e.setState({nameValidate:!1})}})))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement(G,{label:N.a.createElement("span",null,N.a.createElement(F["FormattedMessage"],{id:"role.guanlianxiyuan"}))},t("rIds",{initialValue:g,rules:[{required:!0}]})(N.a.createElement(J,{onSelect:function(a){e.addRIds(a)}})))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement(G,{label:N.a.createElement(F["FormattedMessage"],{id:"role.roledescription"}),validateStatus:p?"error":"",help:p?"".concat(Object(F["formatMessage"])({id:"role.notremark"})):""},t("remark",{initialValue:h,rules:[{required:!0}]})(N.a.createElement(c["a"],{placeholder:Object(F["formatMessage"])({id:"role.inputremark"}),style:{width:220},onBlur:function(){e.onBlurRemark()},onFocus:function(){e.setState({remarkValidate:!1})}}))))))))}},{key:"renderRiskAssembly",value:function(){var e=this.props.form.getFieldDecorator;return N.a.createElement("div",null,N.a.createElement(j["a"],{layout:"inline"},N.a.createElement(s["a"],{gutter:{sm:4,lg:20,xl:12}},N.a.createElement(d["a"],{xl:12,lg:12,sm:24}),N.a.createElement(d["a"],{xl:4,lg:12,sm:24},N.a.createElement(G,null,e("Name1")(N.a.createElement(c["a"],{placeholder:Object(F["formatMessage"])({id:"role.rolename"})})))),N.a.createElement(d["a"],{xl:4,lg:12,sm:24},N.a.createElement(G,null,e("Remark1")(N.a.createElement(c["a"],{placeholder:Object(F["formatMessage"])({id:"role.roledescription"})})))),N.a.createElement(d["a"],{xl:2,lg:12,sm:24},N.a.createElement(G,null,N.a.createElement(W["a"],{authority:"RoleManagement:search"},N.a.createElement(m["a"],{style:{top:"2.5px",height:32,backgroundColor:"#3D73FE"},type:"primary",size:"large",onClick:this.handleSearch.bind(this)},Object(F["formatMessage"])({id:"role.select"}))))),N.a.createElement(d["a"],{xl:2,lg:12,sm:24},N.a.createElement(G,null,N.a.createElement(W["a"],{authority:"RoleManagement:add"},N.a.createElement(m["a"],{style:{top:"2.5px",height:32,color:"black"},size:"large",onClick:this.showModal.bind(this)},Object(F["formatMessage"])({id:"role.add"}))))))))}},{key:"render",value:function(){var e=this.state.selectedRows,a=this.props,t=a.rolemodel.data,r=a.loading,n=a.loadingAll;return t===[]&&this.setState({data:t}),N.a.createElement(D["a"],null,N.a.createElement(o["a"],{tip:Object(F["formatMessage"])({id:"Jwanaliysis.loading"}),spinning:n},N.a.createElement(i["a"],null,this.renderRiskAssembly(),N.a.createElement(x["a"],{bordered:!0,rowKey:function(e){return e.id},selectedRows:e,loading:r,data:t,columns:this.columns,onSelectRow:null,rowSelection:null,onChange:this.handleStandardTableChange})),this.modal()))}}]),t}(V["PureComponent"]),P=K))||P)||P);a["default"]=$}}]);