(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"hr9/":function(e,a){document.onkeydown=function(e){var a="undefined"!=typeof event?window.event:e;if(13===a.keyCode)return!1}},uts8:function(e,a,t){"use strict";t.r(a);t("T2oS");var o,n,i,r=t("W9HT"),s=(t("IzEo"),t("bx4M")),l=(t("5NDa"),t("5rEg")),c=t("jehZ"),u=t.n(c),d=(t("+L6B"),t("2/Rp")),m=(t("O3gP"),t("lrIw")),p=t("p0pE"),g=t.n(p),f=t("2Taf"),b=t.n(f),h=t("vZ4D"),y=t.n(h),v=t("rlhR"),C=t.n(v),x=t("MhPg"),S=t.n(x),O=t("l4Ni"),M=t.n(O),E=t("ujKo"),N=t.n(E),V=(t("2qtc"),t("kLXV")),k=(t("B9cy"),t("Ol7k")),j=(t("OaEy"),t("2fM7")),T=(t("y8nQ"),t("Vl3Y")),w=t("q1tI"),F=t.n(w),I=t("MuoO"),D=t("7DNP"),q=t("LLXN"),B=t("zHco"),U=t("Aeqt"),P=t("vDqi"),A=t.n(P),Z=(t("Qyje"),t("hr9/"),t("HZnN")),z=t("usdK");function R(e){var a=J();return function(){var t,o=N()(e);if(a){var n=N()(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return M()(this,t)}}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var L,_=T["a"].Item,H=j["a"].Option,$=k["a"].Sider;function K(){L&&clearTimeout(L),L=setTimeout(function(){V["a"].info({title:"".concat(Object(q["formatMessage"])({id:"baogao.chongfugongsi"}))})},6e3)}function Q(e){for(var a=/^[\u4e00-\u9fa5]{0,}$/,t=0,o=0;o<e.length;o++)a.test(e[o])?t+=2:t++;return t}function X(e){var a=e.split(""),t=[],o=!0;for(var n in a)if(t.push(e.charCodeAt(n)),t.length===a.length)for(var i=1;i<=t.length;i++)if(Math.abs(Number(t[i])-Number(t[i-1]))>1){o=!1;break}return o}function W(e){var a={};for(var t in e){if(a[e[t]])return e[t];a[e[t]]=!0}return"0"}var Y=(o=Object(I["connect"])(function(e){var a=e.baogao,t=e.user,o=e.loading;return{baogao:a,submitting:o.models.baogao,currentUser1:t.currentUser}}),o((i=function(e){S()(t,e);var a=R(t);function t(e){var o;return b()(this,t),o=a.call(this,e),o.handleSubmit=function(e){e.preventDefault(),o.setState({submitting:!0});var a=o.props,t=a.dispatch,n=a.form,i=a.baogao.currentUser,r=(a.currentUser1,o.state),s=r.userValidate,l=r.companyValidate,c=r.databasenull,u=r.morecompany,d=r.poValidate1,m=r.data1;n.validateFields(function(e,a){if(Q(a.examineName)<8)V["a"].info({title:Object(q["formatMessage"])({id:"Jwbulkapply.nameLength"})});else{var r=/\d{3}/,p=/([a-zA-Z])\1/;if(X(a.examineName)||r.test(a.examineName)||p.test(a.examineName))return o.companyTip1=Object(q["formatMessage"])({id:"baogao.notcompany"}),void o.setState({companyValidate:!0,noset:!0});if(o.companyTip1)V["a"].info({title:o.companyTip1});else if(a.po||!0!==d)if(a.mailbox&&o.onBlurUser(),s||l){var f="".concat(Object(q["formatMessage"])({id:"baogao.notcompany"}));o.companyTip1===f&&V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notselectgongsi"})})}else{if(void 0===i||""===i||null===i)return void V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notinservice"})});if(!0===c)return void V["a"].info({title:Object(q["formatMessage"])({id:"baogao.nosaveorder"})});if(u&&u.length>0)return void K();if(m===[]||m.length<1)return void V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notcompany"})});var b=m.filter(function(e){return e.examineName===a.examineName})[0];if(b&&(void 0===b.status||null===b.status||""===b.status))return void V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notcompany"})});var h={mailbox:void 0!==a.mailbox?a.mailbox:"",examineName:a.examineName,examineCCode:a.examineCCode,languages:i.languages,reportType:i.reportType,po:a.po,dDate:i.serviceEnd};e||(""!==h.mailbox?void 0===i.templateId||null===i.templateId||""===i.templateId?V["a"].info({title:Object(q["formatMessage"])({id:"baogao.nobangding"})}):t({type:"baogao/saveorder",payload:g()({},h)}).then(function(){var e=o.props.baogao.result;0===e.code?(V["a"].success({title:e.msg}),z["a"].push({pathname:"/apply"}),o.forceUpdate(),n.resetFields(),o.setState({examineCCode:""}),t({type:"baogao/fetch"}).then(function(){var e=o.props.baogao.currentUser;void 0!==e&&""!==e&&null!==e&&(0===e.isTestCode?(V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notinservice"})}),o.setState({caibaoIsNull:!0})):2===e.isTestCode&&(V["a"].info({title:Object(q["formatMessage"])({id:"baogao.shiyongcode"})}),o.setState({caibaoIsNull:!0})))})):V["a"].error({title:e.msg})}):t({type:"baogao/saveorder",payload:g()({},h)}).then(function(){var e=o.props.baogao.result;e?0===e.code?(V["a"].success({title:e.msg}),z["a"].push({pathname:"/apply"}),o.forceUpdate(),n.resetFields(),o.setState({examineCCode:""}),t({type:"baogao/fetch"}).then(function(){var e=o.props.baogao.currentUser;void 0!==e&&""!==e&&null!==e&&(0===e.isTestCode?o.setState({caibaoIsNull:!0}):2===e.isTestCode&&o.setState({caibaoIsNull:!0}))})):V["a"].error({title:e.msg}):V["a"].error({title:"\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u8054\u7cfb\u540e\u53f0\u7ba1\u7406\u5458\uff01"})}))}else o.setState({poValidate:!0,poTip:"".concat(Object(q["formatMessage"])({id:"baogao.ponotnull"}))})}})},o.Change=function(e){o.setState({data:!e||e.indexOf("@")>=0?[]:["".concat(e,"@gmail.com"),"".concat(e,"@163.com"),"".concat(e,"@qq.com"),"".concat(e,"@aliyun.com")]})},o.handleChange=function(e,a){o.setState({examineCCode:e,examineName:a.props.children})},o.selectPO=function(e){var a=C()(o);A.a.post("".concat(U["a"],"/apply/baogao/isSelectPO")).then(function(t){if(t.data)return 1===t.data.code&&0===e?(a.setState({poValidate:!0,poTip:"".concat(Object(q["formatMessage"])({id:"baogao.ponotnull"}))}),!0):(a.setState({poValidate:!1}),!1)})},o.handleChangelike=function(e){if(e){o.setState({companyValidate:!1,notnull:!1});var a=e.trim();if(-1!==a.indexOf("'"))return;var t=C()(o);L=setTimeout(function(){if(Q(a)>=8){var e,n=/\d{3}/,i=/([a-zA-Z])\1/;if(X(a)||n.test(a)||i.test(a))return o.companyTip1=Object(q["formatMessage"])({id:"baogao.notcompany"}),void o.setState({companyValidate:!0,noset:!0});e&&clearTimeout(e),t.clearStates();var r=t.state,s=r.data1,l=r.noData,c=t.props.form,u=c.setFieldsValue,d=c.getFieldValue;if(s&&s.length>0){var m=s.filter(function(e){return e.examineName===a})[0];if(m)return m.examineCCode&&d("examineCCode")!==m.examineCCode&&u({examineCCode:m.examineCCode}),void t.isStatus(m)}else if("\u65e0\u6570\u636e"===l)return void t.isInData();var p=t.isIndexCN(a);t.houtai(p)}},500)}else o.setState({companyValidate:!0,notnull:!0,notsupport:!1,notselectgongsi:!1,notcompany:!1,databasenull:!1,noset:!1})},o.state={examineName:"",examineCCode:"",reportType:"",languages:"",data:[],data1:[],userValidate:!1,companyValidate:!1,poValidate:!1,companytip:"",compositionStatus:"end",timer:"",caibaoIsNull:!1,morecompany:[],poValidate1:!1,poTip:"",databasenull:!1,noset:!1,notselectgongsi:!1,notnull:!1},o}return y()(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.dispatch;a({type:"baogao/fetch"}).then(function(){var a=e.props.baogao.currentUser;void 0!==a&&""!==a&&null!==a&&(0===a.isTestCode?(V["a"].info({title:Object(q["formatMessage"])({id:"baogao.notinservice"})}),e.setState({caibaoIsNull:!0})):2===a.isTestCode?(V["a"].info({title:Object(q["formatMessage"])({id:"baogao.shiyongcode"})}),e.setState({caibaoIsNull:!0})):e.setState({languages:"2"===a.languages?Object(q["formatMessage"])({id:"baogao.china"}):Object(q["formatMessage"])({id:"baogao.english"}),reportType:"1"===a.reportType?Object(q["formatMessage"])({id:"baogao.youcaibao"}):Object(q["formatMessage"])({id:"baogao.wucaibao"})}))})}},{key:"onBlurUser",value:function(){var e=this,a=this.props.form;a.validateFields(["mailbox"],{},function(a,t){var o=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(t&&t.mailbox)return o.test(t.mailbox)?void e.setState({userValidate:!1}):void e.setState({userValidate:!0});e.setState({userValidate:!1})})}},{key:"onBlurPO",value:function(){var e=this,a=this.props.form;a.validateFields(["po"],{},function(a,t){t&&t.po?e.selectPO(1):e.selectPO(0)})}},{key:"onBlurCompany",value:function(){var e=this,a=this.props.form;a.validateFields(["examineName"],{},function(a,t){if(t&&t.examineName)return Q(t.examineName)>=8?void e.setState({companyValidate:!1}):void 0;e.setState({companyValidate:!0,notnull:!0})});var t=this.state.data1;t||t==[]||(this.companyTip1="".concat(Object(q["formatMessage"])({id:"baogao.notcompany"})),this.setState({notcompany:!0,companyValidate:!0}))}},{key:"isName",value:function(e){var a="0";return!e||-1===e.indexOf("\u57fa\u91d1\u4f1a")&&-1===e.indexOf("\u5f8b\u5e08\u4e8b\u52a1\u6240")||(this.setState({companyValidate:!0,notsupport:!0}),a="1"),a}},{key:"isIndexCN",value:function(e){var a=!1,t="";return/.*[\u4e00-\u9fa5]+.*$/.test(e)&&(a=!0),t=a?e.replace(/[\(]/g,"\uff08").replace(/[\)]/g,"\uff09"):e.replace(/[\\uff08]/g,"(").replace(/[\\uff09]/g,")"),t}},{key:"isStatus",value:function(e){"\u6ce8\u9500"!==e.status&&"\u540a\u9500"!==e.status&&"\u505c\u4e1a"!==e.status||(this.setState({companyValidate:!0,notsupport:!0}),this.companyTip1="".concat(Object(q["formatMessage"])({id:"Jwbulkapply.notsupport"})))}},{key:"isInData",value:function(){this.companyTip1="".concat(Object(q["formatMessage"])({id:"baogao.notcompany"})),this.setState({notcompany:!0,companyValidate:!0,databasenull:!0})}},{key:"clearStates",value:function(){this.setState({notnull:!1,notsupport:!1,notselectgongsi:!1,notcompany:!1,companyValidate:!1,databasenull:!1,noData:"",noset:!1}),this.companyTip1=""}},{key:"houtai",value:function(e){var a=this,t=this,o=this.props.form,n=o.resetFields,i=o.setFieldsValue;n(["examineCCode"]),A.a.get("".concat(U["a"],"/apply/baogao/selectCompany"),{params:{examineName:e}}).then(function(o){if(o&&o.data){var n=[],r=o.data,s=[];if(t.setState({data1:r}),void 0===r||null===r||0===r.length)return a.isInData(),void t.setState({noData:"\u65e0\u6570\u636e"});for(var l=0;l<r.length;l++)n.push(r[l].examineName),e===r[l].examineName&&s.push(r[l].examineName);if(null===s||0===s.length)return a.isInData(),void t.setState({noData:"\u65e0\u6570\u636e"});"0"!==W(n)&&W(n)===e&&t.setState({morecompany:n});var c=r.filter(function(a){return a.examineName===e})[0];c&&(c.examineCCode&&i({examineCCode:c.examineCCode}),a.isStatus(c))}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.dispatch,o=a.form.getFieldDecorator,n=a.submitting,i=this.state,c=i.languages,p=i.reportType,g=i.data,f=i.examineCCode,b=i.data1,h=i.userValidate,y=i.companyValidate,v=i.poValidate,C=i.caibaoIsNull,x=i.poTip,S=i.notnull,O=i.notsupport,M=i.notselectgongsi,E=i.notcompany,N=i.noset,V={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},j={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},w=[];return b&&b.length>0&&(w=b.map(function(e){return F.a.createElement(H,{key:e.examineCCode,value:e.examineName},e.examineName)})),F.a.createElement(B["a"],{style:{height:"56px"}},F.a.createElement(r["a"],{tip:Object(q["formatMessage"])({id:"Jwanaliysis.loading"}),spinning:n},F.a.createElement(s["a"],{bordered:!1},F.a.createElement(T["a"],{onSubmit:this.handleSubmit.bind(this),style:{marginTop:24}},F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.qiye.name"}),validateStatus:y?"error":"",help:y?"".concat(Object(q["formatMessage"])({id:E?"baogao.notcompany":S?"baogao.inputquery.name":O?"Jwbulkapply.notsupport":M?"baogao.notselectgongsi":N?"baogao.notcompany":""})):""}),F.a.createElement(k["a"],null,F.a.createElement($,{width:"60%",style:{backgroundColor:"white"}},o("examineName",{rules:[{required:!0}]})(F.a.createElement(m["a"],{onSearch:function(a){return e.handleChangelike(a)},onSelect:function(a){e.handleChangelike(a)},disabled:C,dataSource:w,placeholder:Object(q["formatMessage"])({id:"baogao.inputquery.name"}),onBlur:function(a){e.handleChangelike(a)},onFocus:function(){e.setState({companyValidate:!1})}}))),F.a.createElement($,{style:{backgroundColor:"white"},width:"2%"}),F.a.createElement($,{style:{backgroundColor:"white"},width:"38%"},F.a.createElement(Z["a"],{authority:"apply:bulkapply"},F.a.createElement(d["a"],{onClick:function(){t(D["routerRedux"].push("/Apply/jwbulkapply"))},disabled:C,style:{backgroundColor:C?"#F6F6F6":"#3D73FE",color:C?"black":"white"}},Object(q["formatMessage"])({id:"baogao.Bulkorder"})))))),F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.code"})}),o("examineCCode",{initialValue:f})(F.a.createElement(l["a"],{disabled:!0,style:{width:"60%",height:"15%"}}))),F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.type"})}),o("reportType",{initialValue:p})(F.a.createElement(l["a"],{disabled:!0,style:{width:"60%",height:"15%"}}))),F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.languages"})}),o("languages",{initialValue:c})(F.a.createElement(l["a"],{disabled:!0,style:{width:"60%",height:"15%"}}))),F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.po"}),validateStatus:v?"error":"",help:v?x:""}),o("po")(F.a.createElement(l["a"],{disabled:C,placeholder:Object(q["formatMessage"])({id:"baogao.inputpo"}),style:{width:"60%"},onBlur:function(){e.onBlurPO()},onFocus:function(){e.setState({poValidate:!1})}}))),F.a.createElement(_,u()({},V,{label:F.a.createElement(q["FormattedMessage"],{id:"baogao.query.email"}),validateStatus:h?"error":"",help:h?"".concat(Object(q["formatMessage"])({id:"baogao.true.email"})):""}),o("mailbox",{})(F.a.createElement(m["a"],{disabled:C,dataSource:g,onChange:this.Change,placeholder:Object(q["formatMessage"])({id:"baogao.inputquery.email"}),style:{width:"60%"},onBlur:function(){e.onBlurUser()},onFocus:function(){e.setState({userValidate:!1})}}))),F.a.createElement(_,j,F.a.createElement(Z["a"],{authority:"apply:submit"},F.a.createElement(d["a"],{htmlType:"submit",style:{marginLeft:"15%",width:100,marginTop:"5%",backgroundColor:C?"#F6F6F6":"#3D73FE",color:C?"black":"white"},disabled:C},F.a.createElement(q["FormattedMessage"],{id:"baogao.submit"}))))))))}}]),t}(w["PureComponent"]),n=i))||n);a["default"]=T["a"].create()(Y)}}]);