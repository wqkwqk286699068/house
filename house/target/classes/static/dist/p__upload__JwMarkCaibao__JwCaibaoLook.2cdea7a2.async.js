(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[131],{Fjct:function(e,t,a){e.exports={tableList:"antd-pro-pages-upload-jw-mark-caibao-cai-bao-tableList",tableListForm:"antd-pro-pages-upload-jw-mark-caibao-cai-bao-tableListForm",submitButtons:"antd-pro-pages-upload-jw-mark-caibao-cai-bao-submitButtons"}},pGcq:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,i,r,l=a("bx4M"),o=(a("+BJd"),a("mr32")),s=(a("+L6B"),a("2/Rp")),c=a("2Taf"),d=a.n(c),u=a("vZ4D"),m=a.n(u),h=a("rlhR"),f=a.n(h),p=a("MhPg"),b=a.n(p),g=a("l4Ni"),E=a.n(g),v=a("ujKo"),y=a.n(v),k=(a("B9cy"),a("Ol7k")),j=a("q1tI"),w=a.n(j),C=a("LLXN"),S=(a("T2oS"),a("W9HT")),R=(a("Pwec"),a("CtXQ")),N=a("eHn4"),M=a.n(N),O=(a("g9YV"),a("wCAj")),x=(a("P2fV"),a("NJEC")),J=a("gWZ8"),T=a.n(J),D=(a("2qtc"),a("kLXV")),I=(a("5NDa"),a("5rEg")),q=a("p0pE"),L=a.n(q),F=(a("OaEy"),a("2fM7")),A=a("Y/ft"),P=a.n(A),B=(a("y8nQ"),a("Vl3Y")),V=a("vDqi"),H=a.n(V),z=a("Qyje"),W=a.n(z),G=a("Aeqt");function Q(e){var t=X();return function(){var a,n=y()(e);if(t){var i=y()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return E()(this,a)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Y=w.a.createContext(),Z=B["a"].Item,K=function(e){var t=e.form,a=(e.index,P()(e,["form","index"]));return w.a.createElement(Y.Provider,{value:t},w.a.createElement("tr",a))},U=B["a"].create()(K),$=F["a"].Option,_=function(e){b()(a,e);var t=Q(a);function a(){var e;d()(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},function(){t&&e.input.focus()})},e.save=function(t){var a=e.props,n=a.record,i=a.handleSave;e.form.validateFields(function(a,r){a&&a[t.currentTarget.id]||(e.toggleEdit(),""!=r.describe&&r.describe,i(L()({},n,r)))})},e.shubiaoyiru=function(t){var a=e.props,n=a.record,i=a.handleSave;e.form.validateFields(function(e,a){e&&e[t.currentTarget.id]||(a.describe==Object(C["formatMessage"])({id:"jindiao.JwReport.info1"})&&(a.describe=""),i(L()({},n,a)))})},e.renderCell=function(t){e.form=t;var a=e.props,n=a.children,i=a.dataIndex,r=a.record,l=(a.title,e.state.editing);return l?w.a.createElement(B["a"].Item,{style:{margin:0}},t.getFieldDecorator(i,{initialValue:r[i]})(w.a.createElement(I["a"],{ref:function(t){return e.input=t},onPressEnter:e.save,onFocus:e.shubiaoyiru,onBlur:e.save}))):w.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e.toggleEdit},n)},e}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=P()(e,["editable","dataIndex","title","record","index","handleSave","children"]);return w.a.createElement("td",n,t?w.a.createElement(Y.Consumer,null,this.renderCell):a)}}]),a}(w.a.Component);function ee(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);n>=1&&n<=126||65376<=n&&n<=65439?t++:t+=2}return t}var te=(n=B["a"].create(),n((r=function(e){b()(a,e);var t=Q(a);function a(e){var n;return d()(this,a),n=t.call(this,e),n.handleDelete=function(e){var t=n.state.datalist;if(t!=[]){for(var a=0;a<t.length;a++)e===t[a].key&&t.splice(a,1);n.setState({datalist:t})}},n.handleAdd=function(){var e=n.state,t=e.count,a=e.datalist,i={key:t,describe:Object(C["formatMessage"])({id:"jindiao.JwReport.info1"}),riskSignal:Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})};n.setState({datalist:[].concat(T()(a),[i]),count:t+1})},n.handleSave=function(e){var t=T()(n.state.datalist),a=t.findIndex(function(t){return e.key===t.key}),i=t[a];t.splice(a,1,L()({},i,e)),n.setState({datalist:t})},n.columns=[{title:Object(C["formatMessage"])({id:"jindiao.JwReport.risk"}),dataIndex:"riskSignal",align:"center",width:"60%",key:"riskSignal",render:function(e,t){return e==Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})?w.a.createElement(F["a"],{placeholder:e,style:{maxWidth:"600px",textAlign:"center"},onChange:n.handleChange.bind(f()(n),t)},n.getOption()):w.a.createElement(F["a"],{defaultValue:e,style:{maxWidth:"600px",textAlign:"center"},onChange:n.handleChange.bind(f()(n),t)},n.getOption())}},{title:Object(C["formatMessage"])({id:"jindiao.JwReport.miaoshu"}),dataIndex:"describe",width:"30%",editable:!0,align:"center",key:"describe",render:function(e,t){return""==e||e==Object(C["formatMessage"])({id:"jindiao.JwReport.info1"})?w.a.createElement("div",null,w.a.createElement(I["a"],{placeholder:Object(C["formatMessage"])({id:"jindiao.JwReport.info1"}),style:{width:"100%",textAlign:"center"}})):w.a.createElement("div",null,w.a.createElement(I["a"],{value:e,style:{width:"100%",textAlign:"center"}}))}},{title:Object(C["formatMessage"])({id:"jindiao.JwReport.caozuo"}),dataIndex:"operation",align:"center",width:"10%",render:function(e,t){return w.a.createElement(x["a"],{title:Object(C["formatMessage"])({id:"jindiao.JwReport.caozuo"}),onConfirm:function(){return n.handleDelete(t.key)}},w.a.createElement("a",{href:"javascript:;"},Object(C["formatMessage"])({id:"jindiao.JwReport.delete"})))}}],n.state={datalist:[],searchxinhaolist:[],count:0,spinning:!1},n}return m()(a,[{key:"handleChange",value:function(e,t){var a={riskSignal:t};this.handleSave(L()({},e,a))}},{key:"getOption",value:function(){for(var e=this.state.searchxinhaolist,t=[],a=0;a<e.length;a++)t.push(w.a.createElement($,{value:e[a].riskTypeCode},e[a].riskType));return t}},{key:"clone",value:function(){var e=this.state.datalist,t=this.props.values.dabiaolist,a=[],n=!1;if(this.props.clone(n),void 0==t||0==t.length)a.push({key:"0",describe:Object(C["formatMessage"])({id:"jindiao.JwReport.info1"}),riskSignal:Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})}),this.setState({datalist:a}),this.setCount.bind(this);else{for(var i=0;i<t.length;i++)a.push({key:""+i,id:t[i].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===e[i].describe?"":e[i].describe,riskSignal:t[i].riskType,riskTypeCode:t[i].riskTypeCode});this.setState({datalist:a})}}},{key:"handleSubmit",value:function(e){var t,a=this.props.values,n=a.btNo,i=a.dbNo,r=a.corpName,l=a.sysCode,o=a.version,s=a.mkName,c=(a.dabiaolist,a.visible,[]);if(e!=[]&&e.length>0&&e.length>0)for(var d=0;d<e.length;d++)if("\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"==e[d].describe){if(t=ee(e[d].describe),t>60)return void ae(Object(C["formatMessage"])({id:"jindiao.JwReport.info4"})+(d+1)+Object(C["formatMessage"])({id:"jindiao.JwReport.info5"}));if(e[d].riskSignal==Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})||""==e[d].riskSignal)return void ae(Object(C["formatMessage"])({id:"jindiao.JwReport.info2"}));"1"==e[d].flag?c.push({id:e[d].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===e[d].describe?"":e[d].describe,riskSignal:e[d].riskSignal,btNo:n,businessId:i,examinename:r,syscode:l,version:o,mkName:s,MarkType:"1",flag:"Old"}):c.push({id:e[d].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===e[d].describe?"":e[d].describe,riskSignal:e[d].riskSignal,btNo:n,businessId:i,examinename:r,syscode:l,version:o,mkName:s,MarkType:"1",flag:"new"})}else{if(t>60)return void ae(Object(C["formatMessage"])({id:"jindiao.JwReport.info4"})+(d+1)+Object(C["formatMessage"])({id:"jindiao.JwReport.info5"}));if(e[d].riskSignal==Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})||""==e[d].riskSignal)return void ae(Object(C["formatMessage"])({id:"jindiao.JwReport.info2"}));"1"==e[d].flag?c.push({id:e[d].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===e[d].describe?"":e[d].describe,riskSignal:e[d].riskSignal,btNo:n,businessId:i,examinename:r,syscode:l,version:o,mkName:s,MarkType:"1",flag:"Old"}):c.push({id:e[d].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===e[d].describe?"":e[d].describe,riskSignal:e[d].riskSignal,btNo:n,businessId:i,examinename:r,syscode:l,version:o,mkName:s,MarkType:"1",flag:"new"})}var u=this;if(c!=[]&&c.length>0){var m={fxlist:JSON.stringify(c)};this.setState({spinning:!0}),H.a.post("".concat(G["a"],"/marking/jwupLoadReport/saveDb"),W.a.stringify(m)).then(function(e){0==e.data.code?(u.props.ok(),D["a"].success({title:Object(C["formatMessage"])({id:"jindiao.JwReport.info8"})}),u.props.search()):(D["a"].info({title:e.data.msg}),u.setState({spinning:!1}))})}else D["a"].info({title:Object(C["formatMessage"])({id:"jindiao.JwReport.info9"})})}},{key:"componentDidMount",value:function(){var e=this.state.datalist,t=this.props.values,a=(t.btNo,t.dbNo,t.corpName,t.sysCode,t.version,t.mkName,t.dabiaolist),n=this;if(H.a.post("".concat(G["a"],"/marking/jwupLoadReport/searchxinhaolist")).then(function(e){n.setState({searchxinhaolist:e.data})}),void 0!=a&&a!=[])for(var i=0;i<a.length;i++)e.push({key:""+i,id:a[i].id,describe:"\u8bf7\u8f93\u5165\u5907\u6ce8(30\u5b57\u5185)"===a[i].describe?" ":a[i].describe,riskSignal:a[i].riskType,riskTypeCode:a[i].riskTypeCode,flag:"1"});void 0!=a&&0!=a.length||(e.push({key:"0",describe:Object(C["formatMessage"])({id:"jindiao.JwReport.info1"}),riskSignal:Object(C["formatMessage"])({id:"jindiao.JwReport.info2"})}),this.setCount.bind(this))}},{key:"setCount",value:function(){this.setState({count:1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.datalist,n=(t.count,t.searchxinhaolist,this.props.form.getFieldDecorator),i=this.props.values,r=(i.btNo,i.dbNo,i.corpName,i.sysCode,i.version,i.mkName,i.dabiaolist,i.visible),l={body:{row:U,cell:_}},o=this.columns.map(function(t){return t.editable?L()({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});return w.a.createElement("div",null,w.a.createElement(D["a"],{title:Object(C["formatMessage"])({id:"jindiao.JwReport.info10"}),ref:"modal",visible:r,keyboard:!0,footer:[],onCancel:this.clone.bind(this),width:"70%"},w.a.createElement(S["a"],{spinning:this.state.spinning,tip:"Loading..."},w.a.createElement(B["a"],{style:{marginTop:0}},w.a.createElement(Z,null,n("riskSignal",{})(w.a.createElement(O["a"],{components:l,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:a,columns:o,pagination:!1})))),w.a.createElement(s["a"],{type:"dashed",block:!0,style:M()({color:"#1890FF"},"color","#3D73FE"),onClick:this.handleAdd},w.a.createElement(R["a"],{type:"plus"}),Object(C["formatMessage"])({id:"Jwbulkapply.insert"})),w.a.createElement("br",null),w.a.createElement("br",null),w.a.createElement(s["a"],{type:"primary",style:{backgroundColor:"#3D73FE",float:"right",marginLeft:10},onClick:this.handleSubmit.bind(this,a)},Object(C["formatMessage"])({id:"jindiao.JwReport.submit"})),w.a.createElement(s["a"],{onClick:this.clone.bind(this),style:{float:"right"}},Object(C["formatMessage"])({id:"jindiao.JwReport.quxiao"})),w.a.createElement("br",null))))}}]),a}(w.a.Component),i=r))||i);function ae(e){D["a"].warning({title:Object(C["formatMessage"])({id:"Jwbulkapply.Reminder"}),content:e})}var ne,ie,re=a("zHco"),le=a("MuoO"),oe=a("Fjct"),se=a.n(oe);function ce(e){var t=de();return function(){var a,n=y()(e);if(t){var i=y()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return E()(this,a)}}function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var ue=k["a"].Footer;function me(e){return void 0!=e&&void 0!=e[0]&&null!=e[0].deng}var he=(ne=Object(le["connect"])(function(e){var t=e.jwshuaxinModel,a=e.loading;return{loadingAll:a.models.jwshuaxinModel,jwshuaxinModel:t}}),ne(ie=function(e){b()(a,e);var t=ce(a);function a(e){var n;return d()(this,a),n=t.call(this,e),n.state={data:[]},n.dabiao=n.dabiao.bind(f()(n)),n.search=n.search.bind(f()(n)),n.ok=n.ok.bind(f()(n)),n}return m()(a,[{key:"componentDidMount",value:function(){var e=this.props.location,t=e.query,a=t.CorpName,n=t.version,i=t.cbdbVersion,r=t.sysCode,l={CorpName:a,version:n,cbdbversion:i,sysCode:r},o=this;H.a.post("".concat(G["a"],"/marking/jwupLoadReport/getCaibaoReport"),W.a.stringify(l)).then(function(e){o.setState({data:e.data})})}},{key:"search",value:function(){var e=this.props.location,t={CorpName:e.query.CorpName,version:e.query.version},a=this;H.a.post("".concat(G["a"],"/marking/jwupLoadReport/getCaibaoReport"),W.a.stringify(t)).then(function(e){a.setState({data:e.data})})}},{key:"dabiao",value:function(){var e=this.props.location,t=this.state.visible,a=this,n={corpName:e.query.CorpName,version:e.query.version,caibaoflag:"cwsc",btNo:"7",businessId:e.query.DbNo};t||H.a.post("".concat(G["a"],"/marking/jwupLoadReport/searchxinhao"),W.a.stringify(n)).then(function(e){a.setState({dabiaolist:e.data,visible:!0,obj:n})})}},{key:"ok",value:function(){this.setState({visible:!1})}},{key:"clone",value:function(e){this.setState({visible:!1,spinning:e})}},{key:"render",value:function(){var e=this.props.location,t=this.state,a=t.dabiaolist,n=t.data,i=t.visible,r=e.query,c=r.flags,d=r.current2,u=r.key,m={flags:c,current2:d,key:u,biaoji:"uploadLook"},h={btNo:"7",dbNo:e.query.DbNo,corpName:e.query.CorpName,version:e.query.version,mkName:"cwsc",dabiaolist:a,visible:i};return w.a.createElement(re["a"],{states:m},w.a.createElement(ue,{style:{backgroundColor:"white",padding:0}},w.a.createElement(l["a"],{bodyStyle:{paddingTop:0},title:e.query.CorpName,bordered:!1,extra:c?null:w.a.createElement(s["a"],{type:"primary",disabled:me(n),onClick:this.dabiao},"\u6253\u6807")},n.length>0?w.a.createElement("div",{className:se.a.tableList},w.a.createElement("span",{style:{float:"right",paddingBottom:"5px"}},"\uff08\u5355\u4f4d\uff1a\u5343\u5143\uff09"),w.a.createElement("table",{border:"1",style:{width:"100%",margin:"auto"}},w.a.createElement("thead",null,w.a.createElement("tr",null,w.a.createElement("th",{width:"20%"},"\u4f01\u4e1a\u540d"),w.a.createElement("td",{width:"30%"},n[0].CorpName),w.a.createElement("td",{width:"30%"},n[1].CorpName),null!=n[0].deng?w.a.createElement("td",{rowSpan:"17",style:{textAlign:"center"}},"\u7ea2\u706f"===n[0].deng?w.a.createElement(o["a"],{style:{height:32,width:64,lineHeight:2.5},color:"#ff5f5f"},Object(C["formatMessage"])({id:"jindiao.Jwhome.gao"})):null,"\u9ec4\u706f"===n[0].deng?w.a.createElement(o["a"],{style:{height:32,width:64,lineHeight:2.5},color:"#ff9446"},Object(C["formatMessage"])({id:"jindiao.Jwhome.di"})):null,"\u7eff\u706f"===n[0].deng?w.a.createElement(o["a"],{style:{height:32,width:64,lineHeight:2.5},color:"#14e183"},Object(C["formatMessage"])({id:"jindiao.Jwhome.wu"})):null):null),w.a.createElement("tr",null,w.a.createElement("th",null,"\u7edf\u4e00\u4ee3\u7801"),w.a.createElement("td",null,n[0].Code),w.a.createElement("td",null,n[1].Code)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u5e74\u4efd"),w.a.createElement("td",null,n[0].year),w.a.createElement("td",null,n[1].year)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8d44\u4ea7\u603b\u989d"),w.a.createElement("td",null,n[0].Totalassets),w.a.createElement("td",null,n[1].Totalassets)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u6240\u6709\u6743\u76ca\u5408\u8ba1"),w.a.createElement("td",null,n[0].TotalOwnership),w.a.createElement("td",null,n[1].TotalOwnership)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8425\u4e1a\u603b\u6536\u5165"),w.a.createElement("td",null,n[0].TotalGoi),w.a.createElement("td",null,n[1].TotalGoi)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u5229\u6da6\u603b\u989d"),w.a.createElement("td",null,n[0].TotalProfit),w.a.createElement("td",null,n[1].TotalProfit)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8425\u4e1a\u603b\u6536\u5165\u4e2d\u4e3b\u8425\u4e1a\u52a1\u6536\u5165"),w.a.createElement("td",null,n[0].TotalBusiness),w.a.createElement("td",null,n[1].TotalBusiness)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u51c0\u5229\u6da6"),w.a.createElement("td",null,n[0].Netprofit),w.a.createElement("td",null,n[1].Netprofit)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u7eb3\u7a0e\u603b\u989d"),w.a.createElement("td",null,n[0].TotalPayment),w.a.createElement("td",null,n[1].TotalPayment)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8d1f\u503a\u603b\u989d"),w.a.createElement("td",null,n[0].Totalliabilities),w.a.createElement("td",null,n[1].Totalliabilities))))):w.a.createElement("div",null,w.a.createElement("table",{border:"1",style:{width:"60%",margin:"auto"}},w.a.createElement("thead",null,w.a.createElement("tr",null,w.a.createElement("th",{width:"20%"},"\u4f01\u4e1a\u540d"),w.a.createElement("td",{width:"30%"}),w.a.createElement("td",{width:"30%"})),w.a.createElement("tr",null,w.a.createElement("th",null,"\u7edf\u4e00\u4ee3\u7801"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u5e74\u4efd"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8d44\u4ea7\u603b\u989d"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u6240\u6709\u6743\u76ca\u5408\u8ba1"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8425\u4e1a\u603b\u6536\u5165"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u5229\u6da6\u603b\u989d"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8425\u4e1a\u603b\u6536\u5165\u4e2d\u4e3b\u8425\u4e1a\u52a1\u6536\u5165"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u51c0\u5229\u6da6"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u7eb3\u7a0e\u603b\u989d"),w.a.createElement("td",null),w.a.createElement("td",null)),w.a.createElement("tr",null,w.a.createElement("th",null,"\u8d1f\u503a\u603b\u989d"),w.a.createElement("td",null),w.a.createElement("td",null))))))),i?w.a.createElement(te,{search:this.search.bind(this),ok:this.ok.bind(this),clone:this.clone.bind(this),values:h}):null)}}]),a}(j["PureComponent"]))||ie);t["default"]=he}}]);